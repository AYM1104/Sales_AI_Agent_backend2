# import json
# import os


# # 共通プロンプトの前文
# base_prompt = """
# あなたは、企業の有価証券報告書を読み解き、IoTソリューションの営業戦略立案に活用するための情報を抽出する専門アナリストです。
# 以下の企業の有価証券報告書を分析し、営業戦略立案に役立つ情報を抽出してください。

# 対象企業：{company_name}
# """

# # 共通の補足指示
# common_notes = """
# 【重要】
# - 次の分析で参照するため、この企業の基本情報を簡潔にまとめて最後に付けてください。
# - 各項目について、具体的な根拠（有価証券報告書のページ数や記載内容の引用）とともに整理してください。
# - 情報が不足している場合は「記載なし」と明記し、推測で補完する場合は「推測」と明示してください。

# 【補足指示】
# - 数値データは具体的に記載（売上高○億円、従業員数○人など）
# - 業界特有の課題やトレンドも考慮して分析
# - 競合他社の動向も踏まえた相対的な位置づけを意識
# - 提案の優先順位付けも含めて整理
# """

# # 各ステップごとの分析本体だけを定義
# step_bodies = {
#     "step1": """
# 【分析対象】
# 1. 事業概況とIoT親和性
# - 主力事業領域は何か？業界分類も含めて整理してください。
# - 直近数年の売上高推移・利益率から事業規模と成長性をどう評価できるか？
# - IoT導入の可能性が高いのはどの事業領域か？その理由も添えてください。
# - DX（デジタルトランスフォーメーション）やIT投資への取り組みは記載されているか？

# 【出力形式】
# ## Step 1: 事業概況とIoT親和性
# ### 主力事業領域
# ### 事業規模と成長性
# ### IoT導入可能性の高い事業領域
# ### デジタル化への取り組み状況
# """,

#     "step2": """
# 【分析対象】
# 2. 経営課題と痛み
# - 業績面での課題として、コスト増・効率性・競争力の観点でどのような懸念点があるか？ 具体的な数値や記述があれば示してください。
# - 有価証券報告書に記載されている主な事業リスクは何か？ 発生可能性や影響度の高いリスクに注目して整理してください。
# - 人手不足や労働力に関する課題はあるか？ 採用難・人員配置の課題・高齢化の記載などがあれば整理してください。
# - 品質や安全管理に関して、品質向上・事故防止・コンプライアンス強化などの取り組みや課題が記載されているか？ 具体例があれば挙げてください。

# 【出力形式】
# ## Step 2: 経営課題と痛み
# ### 業績上の課題
# ### 事業リスク
# ### 人手不足・労働力問題
# ### 品質・安全管理
# """,

#     "step3": """
# 【分析対象】
# 3. 財務状況と投資余力
# - 自己資本比率や現金保有額、借入金の状況から見て、財務の健全性はどう評価できるか？
# - 過去3年間の設備投資額や投資対象はどうなっているか？特定の事業や地域への集中投資はあるか？
# - システムやIT関連の投資内容は具体的に記載されているか？その目的や規模は？
# - 投資回収に対する姿勢として、ROI（投資収益率）を重視しているか？それとも長期視点での成長投資が優先されているか？

# 【出力形式】
# ## Step 3: 財務状況と投資余力
# ### 財務健全性
# ### 設備投資動向
# ### IT・デジタル投資
# ### 投資回収への姿勢
# """,

#     "step4": """
# 【分析対象】
# 4. 組織体制と意思決定
# - 経営陣に技術系出身者や変革志向の人物はいるか？代表者・役員の経歴から判断できる点は？
# - 組織構造はどのようになっているか？事業部制や機能別組織など、IoTやDXの導入・意思決定に影響しそうな構造的特徴はあるか？
# - グループ会社や関連会社を含めて、IoT導入の余地がありそうな子会社や部門はあるか？
# - 国内外における事業拠点の配置はどうなっているか？工場や営業所などの分散状況から、どのようなIoT導入ニーズが想定できるか？

# 【出力形式】
# ## Step 4: 組織体制と意思決定の特徴
# ### 経営陣の属性と変革志向の有無
# ### 組織構造と意思決定の仕組み
# ### 子会社・関連会社のIoT導入可能性
# ### 国内外拠点の分散状況とIoTニーズ
# """,

#     "step5": """
# 【分析対象】
# 5. 競合環境と差別化ニーズ
# - 業界内での同社のポジションはどのように説明されているか？競合他社との比較から強み・弱みが見える記述はあるか？
# - 新技術や革新的な取り組みに関する記載はあるか？どのような技術・製品への対応姿勢を示しているか？
# - 顧客からの要望として、品質向上、納期短縮、コスト削減などの圧力が報告書に記載されているか？どの事業でニーズが強いか？

# 【出力形式】
# ## Step 5: 競合環境と差別化ニーズ
# ### 業界内でのポジションと競合状況
# ### 技術革新・イノベーションへの対応
# ### 顧客ニーズとプレッシャー（品質・納期・コスト）
# """,

#     "step6": """
# 【分析対象】
# 6. 提案機会の特定
# - 報告書内で、すぐに提案できそうな課題（短期的な効率化・対応が急がれる内容）は記載されているか？対象部門や現場の状況から見える提案余地は？
# - 将来的に大きな事業変革に繋がるような中長期的な投資テーマはあるか？中期経営計画などに記載された内容も含めて抽出してください。
# - 製造、物流、IT、経営企画など、どの部門がIoT・DXの導入を主導しそうか？アプローチすべき部門の特定を試みてください。
# - 提案時に重視すべき訴求ポイントは何か？コスト削減、品質向上、業務効率化、新規事業創出など、経営課題と結びつけて説明されている点があれば明記してください。

# 【出力形式】
# ## Step 6: 提案機会の特定
# ### 短期的に提案可能な課題領域
# ### 中長期的な変革テーマ・投資余地
# ### アプローチすべき部門
# ### 訴求すべき提案ポイント
# """
# }


# # JSONファイルとして保存
# steps = list(prompts.keys())

# for step in steps:
#     with open(f"enterprise_analysis_{step}.json", "w", encoding="utf-8") as f:
#         json.dump({"prompt": prompts[step]}, f, indent=2, ensure_ascii=False)